sudo: false
language: node_js
node_js:
- '6.2'
env:
  global:
  - CXX=g++-4.8
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
  - DEPLOY_BRANCH=editing
  - GH_REF=github.com/parkmath/parkmath.github.io.git
  - secure: RSFxphPrCJdZVynbvvB87sXm6TYiyDhQN4FGFLL/Y5V45vILeKK05qMzsDnXkU6anazXcP9VwGeVpgpkt0uWEn+0PyHP2HHVtSmuKlwUAL9o6OFqkaIa0YGSnMLkSkjZvC0S9FOQm/0uNZCI+eMyFtMrEW4wBf1+H0wG6ubCRLg=
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - gcc-4.8
    - g++-4.8
cache:
  apt: true
  directories:
  - node_modules
  - bundle/cache
before_install:
- chmod +x ./tools/deploy.sh
script:
- travis_wait make _site/pdf/01-reasoning-and-proving.pdf && ./tools/deploy.sh
- date && travis_wait make _site/pdf/99-custom-1.pdf && date && ./tools/deploy.sh
- travis_wait make _site/pdf/99-custom-2.pdf && ./tools/deploy.sh
- ls -l _site/pdf
- travis_wait make all
- ./tools/deploy.sh

